## yanagi_MediaToolKit
---
動画とか画像とか文章とか投稿したりをワンコインサーバーでやるやつ 


### 特徴
- git pushするとgithubのコードを読んでデプロイまで全自動でやります
  - ConcourseCIで視認出来ます(たのしい)
- ビルドをローカルでやるので非力なサーバーでも負荷を抑えられます
- コンテナを2つ以上配置してnginxでリバースプロキシしています
  - コンテナごと順次アップデートするため、更新時のダウンタイムがありません
- SSH接続してItamaeスクリプトを実行すればデプロイ可能な環境が整います

### 注記
- ローカルでConcourseCIとDockerレジストリを立て、その間の通信をLetsEncrypt証明書(DNS認証)で解決してます
  - DNS自体は外部
  - 認証局とDNSを自前で立てられるならきっとそっちのほうが楽です
- 本体にPythonを含むためDebian、RDBほかにAlpine使ってます
- コンテナまるまる投げるので転送量は増えます(クラウドサービスでなくVPS想定)
- RDBコンテナは1つで、デプロイ時に自動アップデートされません

### 環境
- win10

### その他
- フロントはVue2(Vuetify), バックはFastAPIです
  - ドラッグ&ドロップで画像をぶん投げたりできます
- 一応一通り動くはずですが転用しても割に合わないと思うので、誰かの参考程度に

### 履歴
- 2022.09 個人情報を削除して公開
- 2021.09-12 ざっくり開発
